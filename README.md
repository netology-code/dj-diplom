# Дипломный проект по курсу «Django: создание функциональных веб-приложений»

Разработать API для интернет-магазина.
Должно быть реализовано API сервиса и интерфейс администрирования. В качестве фреймворка необходимо использовать Django и Django REST Framework.

В качестве решения должен быть предоставлен код и тесты.


## Описание API

Сущности:

### Товар

url: `/api/v1/products/`

Поля:

- название
- описание
- цена
- дата создания
- дата обновления

Доступные действия: retrieve, list, create, update, destroy.

Создавать товары могут только админы. Смотреть могут все пользователи.

Должна быть возможность фильтровать товары по цене и содержимому из названия / описания.

### Отзыв к товару

url: `/api/v1/product-reviews/`

- ID автора отзыва
- ID товара
- текст
- оценка от 1 до 5
- дата создания
- дата обновления

Доступные действия: retrieve, list, create, update, destroy.

Оставлять отзыв к товару могут только авторизованные пользователи. 1 пользователь не может оставлять более 1го отзыва.

Отзыв можно фильтровать по ID пользователя, дате создания и ID товара.

Пользователь может обновлять и удалять только свой собственный отзыв.

### Заказы

url: `/api/v1/orders/`

- ID пользователя
- позиции: каждая позиция состоит из товара и количества единиц
- статус заказа: NEW / IN_PROGRESS / DONE
- общая сумма заказа
- дата создания
- дата обновления

Доступные действия: retrieve, list, create, update, destroy.

Создавать заказы могут только авторизованные пользователи. Админы могут получать все заказы, остальное пользователи только свои.

Заказы можно фильтровать по статусу / общей сумме / дате создания / дате обновления и продуктам из позиций.

Менять статус заказа могут только админы.


### Подборки

url: `/api/v1/product-collections/`

- заголовок
- текст
- товары в подборке
- дата создания
- дата обновления

Доступные действия: retrieve, list, create, update, destroy

Создавать подборки могут только админы, остальные пользователи могут только их смотреть.


## Интерфейс администратора

* Редактирование и просмотр подборок.
* Редактирование и просмотр товаров.
* Просмотр списка заказов пользователей, отсортированных по дате создания, с указанием пользователя и количества товаров.
* Страница детализации заказа с просмотром списка заказанных товаров.
* Редактирование и просмотр отзывов.

## Тестирование

Тесты должны быть написаны на все endpoint'ы вашего приложения.

Там, где логика для админа / простого пользователя различается, вам необходимо написать тест, который бы это валидировал. Например, если менять статус заказа может только админ, то тест на смену статуса для пользователя возвращает ошибку, а тест для админа возвращает успех.

Логику интерфейса администрирования можно не покрывать тестами.

В качестве Test Runner'а используйте `pytest`.


## Подсказки

- Доступные действия во ViewSet: https://www.django-rest-framework.org/api-guide/viewsets/#viewset-actions
- Проверка на админа в DRF: https://www.django-rest-framework.org/api-guide/permissions/#isadminuser
- Пользователь хранится в объекте `request`
- Добавить дополнительный контекст в сериализатор: https://www.django-rest-framework.org/api-guide/serializers/#including-extra-context

## Требования к организации системы

* Система должна быть реализована на Django версии 2 или 3.
* Интерфейс администратора должен быть создан стандартными средствами Django admin.
* В качестве СУБД использовать Postgresql.
* Система при работе не должна вызывать исключений и ошибок.
* Входные данные необходимо валидировать.

## Что необходимо предоставить по проекту

* Миграции для создания базы данных.
* Инструкции по установке и первому запуску. Файл `README.md` в папке проекта.
* Дамп данных с тестовым наполнением `fixtures.json`,
  с тестовым суперпользователем с именем `admin` и паролем `admin` (команда `manage.py dumpdata` для создания дампа).
* http-файл с примерами запросов.

## Дополнительные задачи (не обязательны к выполнению)

* Померять покрытие кода тестами с помощью coverage. Приложить в README пример запуска тестов с coverage
* Реализовать API для логина – пользователь вводит свой email и пароль, в ответ ему выдается токен
* Реализовать возможность регистрации по почте (без подтверждения почты).
* Добавить пользователям возможность добавлять товары в избранное.


---
Способы предоставить код дипломной работы -
исходный код на [BitBucket](https://bitbucket.org/) или [GitHub](https://github.com/).


### Как правильно задавать вопросы дипломному руководителю?

**Что следует делать, чтобы все получилось:**

* Попробовать найти ответ сначала самому в интернете. Ведь, именно это скилл поиска ответов пригодится вам на первой работе. И только после этого спрашивать дипломного руководителя
* В одном вопросе должна быть заложена одна проблема 
* По возможности, прикреплять к вопросу скриншоты и стрелочкой показывать где не получается. Программу для этого можно скачать здесь https://app.prntscr.com/ru/
* По возможности, задавать вопросы в комментариях к коду. 
* Начинать работу над дипломом как можно раньше! Чтобы было больше времени на правки. 
* Делать диплом по-частям, а не все сразу. Иначе, есть шанс, что нужно будет все переделывать :)  

**Что следует делать, чтобы ничего не получилось:**

* Писать вопросы вида “Ничего не работает. Не запускается. Всё сломалось.”
* Откладывать диплом на потом. 
* Ждать ответ на свой вопрос моментально. Дипломные руководители - работающие разработчики, которые занимаются, кроме преподавания, своими проектами. Их время ограничено, поэтому постарайтесь задавать правильные вопросы, чтобы получать быстрые ответы! 

